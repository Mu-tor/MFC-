# MFC-ChatRoom

### 使用MFC框架编写的网络聊天室

**客户端**

1. 更新成员状态。当其他成员上线或者下线时，客户端及时更新该成员状态。

2. 更新成员列表。当新成员加入或者成员被删除时，客户端及时更新成员列表。

3. 当对方不在线时，可以向该成员发送离线消息。

4. 当用户上线时，接收其他用户发送的离线消息

5. 向在线成员发送消息并接收消息。

6. 保存聊天记录。

7. 保存服务器发出的公告

**服务器**

1. 维护聊天室成员列表。

2. 保存用户信息。

3. 为用户保存离线消息。

4. 通知客户端更新成员状态，当用户上线或者下线时，通知客户端更新成员状态。

5. 通知客户端更新成员列表。当有新用户加入或者成员被删除时，通知客户端更新成员列表

6. 为离线客户端保存聊天消息。

7. 验证密码。当用户登录时，验证密码。

8. 禁止已登录用户再次登录。

9. 客户端启动时登录服务器，如果用户为非注册用户则服务器为该用户注册信息。注册信息包括该用户的名称和密码等。以后该用户需要使用注册名称密码登录服务器。服务器以用户名称作为每个用户的唯一标识。用户注册后，服务器向该用户发送用户列表。

10. 注册用户登录服务器时，如果输入密码正确，则服务器请向该用户发送用户列表。如果服务器验证该用户输入密码错误，则通知该用户重新登录，限定密码最多输入3次。

11. 当某个成员上线或者下线时，服务器通知在线成员更新该用户状态。

12. 当某个成员希望与另外一成员交流时，如果另外那个成员在线则可以与其发送消息并接收应答。

13. 当某个成员希望与另外一成员交流时，如果另外那个成员不在线则可以向发送离线消息。当对方上线时将自动接收到离线消息。

14. 可以向全体客户端发送公告。

15. 可以修改用户的信息

16. 可以删除已注册的用户

17. 可以添加用户

    

**关键技术分析**

1. 在服务端通过运用数据库进行用户信息的存储。

2. 客户端通过发送前缀提醒服务端即将进行的登陆注册以及更改密码等操作

3. 服务端通过发送前缀提醒客户端有用户登陆注册等，准备更新用户列表

4. 客户端通过数据库进行聊天记录的存储以及删除